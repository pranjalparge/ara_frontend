# Deny by default
# Order Deny,Allow
# Deny from all

# Allow from specific IP ranges by extracting the first IP from X-Forwarded-For header
# SetEnvIf X-Forwarded-For "^103\.224\.247\.201\b" AllowIP
# SetEnvIf X-Forwarded-For "^182\.70\.120\.222\b" AllowIP
# SetEnvIf X-Forwarded-For "^96\.68\.152\.166\b" AllowIP
# SetEnvIf X-Forwarded-For "^36\.255\.109\.226\b" AllowIP
# SetEnvIf X-Forwarded-For "^103\.168\.164\.226\b" AllowIP
# Allow from env=AllowIP

# Error document for denied access
# ErrorDocument 403 "Your IP address is: %{HTTP:X-Forwarded-For}"

<IfModule mod_headers.c>
    <FilesMatch ".*">
        Header set Cache-Control "no-cache, no-store, must-revalidate"
        Header set Pragma "no-cache"
        Header set Expires "0"
    </FilesMatch>
</IfModule>

<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]

    # Fallback all other routes to index.html
    RewriteRule ^ /admin/index.html [L]
 
    # Compress text, html, javascript, css, xml:
    <IfModule mod_deflate.c>
        AddOutputFilterByType DEFLATE text/plain
        AddOutputFilterByType DEFLATE text/html
        AddOutputFilterByType DEFLATE text/xml
        AddOutputFilterByType DEFLATE text/css
        AddOutputFilterByType DEFLATE application/xml
        AddOutputFilterByType DEFLATE application/xhtml+xml
        AddOutputFilterByType DEFLATE application/rss+xml
        AddOutputFilterByType DEFLATE application/javascript
        AddOutputFilterByType DEFLATE application/x-javascript
    </IfModule>
</IfModule>

# Uncomment the following block if you want to force HTTPS
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{HTTPS} off
    RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R,L]
</IfModule>